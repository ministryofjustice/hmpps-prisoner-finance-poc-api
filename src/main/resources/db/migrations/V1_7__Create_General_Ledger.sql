DROP TABLE IF EXISTS transaction_entry;
DROP TABLE IF EXISTS transaction;
DROP TABLE IF EXISTS account;
DROP TABLE IF EXISTS account_code_lookup;
DROP TABLE IF EXISTS prison;

CREATE TABLE prison (
                        id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                        uuid UUID NOT NULL UNIQUE,
                        code VARCHAR(255) NOT NULL UNIQUE
);

CREATE TABLE account_code_lookup (
                                     account_code INT PRIMARY KEY NOT NULL,
                                     name VARCHAR(255) NOT NULL,
                                     classification VARCHAR(25) NOT NULL,
                                     posting_type VARCHAR(2) NOT NULL
);

INSERT INTO account_code_lookup (account_code, name, classification, posting_type) VALUES
                                                                                       (1101, 'Bank', 'Asset', 'DR'),
                                                                                       (1501, 'Receivable For Earnings', 'Asset', 'DR'),
                                                                                       (1502, 'Receivable For Advances', 'Asset', 'DR'),
                                                                                       (2101, 'Private Cash', 'Liability', 'CR'),
                                                                                       (2102, 'Spends', 'Liability', 'CR'),
                                                                                       (2501, 'Canteen Payable', 'Liability', 'CR'),
                                                                                       (2199, 'Holds', 'Liability', 'CR'),
                                                                                       (3101, 'Clearing Account For Shortages', 'Receipt', 'CR'),
                                                                                       (4102, 'Clearing Account For Overages', 'Disbursement', 'DR'),
                                                                                       (11010, 'Bank Account', 'Asset', 'DR'),
                                                                                       (11030, 'Checks', 'Asset', 'DR'),
                                                                                       (11033, 'Certified Checks', 'Asset', 'DR'),
                                                                                       (15000, 'Accounts Receivable', 'Asset', 'DR'),
                                                                                       (15010, 'Accounts Receivable - Other', 'Asset', 'DR'),
                                                                                       (21010, 'Offender Accounts - Regular', 'Liability', 'CR'),
                                                                                       (21020, 'Offender Accounts - Release', 'Liability', 'CR'),
                                                                                       (21030, 'Overpayments 130170/APZ004', 'Liability', 'CR'),
                                                                                       (25020, 'Restitution', 'Liability', 'CR'),
                                                                                       (25030, 'Court Fines', 'Liability', 'CR'),
                                                                                       (71010, 'Clearing Account for Overages', 'Receipt', 'CR'),
                                                                                       (81010, 'Clearing Account for Shortages', 'Disbursement', 'DR'),
                                                                                       (81030, 'To Record Zero Cash Reconciliation', 'Disbursement', 'DR'),
                                                                                       (21040, 'Other', 'Liability', 'CR'),
                                                                                       (11040, 'Other Receipts (new accounts),', 'Asset', 'DR'),
                                                                                       (11031, 'Money Orders', 'Asset', 'DR'),
                                                                                       (11032, 'Warrants', 'Asset', 'DR'),
                                                                                       (11020, 'Cash', 'Asset', 'DR'),
                                                                                       (25010, 'Administration Fee', 'Liability', 'CR'),
                                                                                       (85000, 'Misc chargs', 'Disbursement', 'DR'),
                                                                                       (28000, 'Collection Fees Payable', 'Liability', 'CR'),
                                                                                       (28005, 'Transaction Fees Payable', 'Liability', 'CR'),
                                                                                       (2514, 'Miscellaneous', 'Liability', 'CR'),
                                                                                       (2515, 'Chaplaincy', 'Liability', 'CR'),
                                                                                       (2516, 'Anonymous Cash', 'Liability', 'CR'),
                                                                                       (1506, 'Prize Money', 'Asset', 'DR'),
                                                                                       (2518, 'Town Visits', 'Liability', 'CR'),
                                                                                       (2519, 'Data Protection', 'Liability', 'CR'),
                                                                                       (2520, 'ID Card', 'Liability', 'CR'),
                                                                                       (2521, 'Charity', 'Liability', 'CR'),
                                                                                       (2522, 'Story Book Dad', 'Liability', 'CR'),
                                                                                       (2523, 'Outworkers', 'Liability', 'CR'),
                                                                                       (2503, 'NACRO Payable', 'Liability', 'CR'),
                                                                                       (4104, 'Advance Write-Off', 'Disbursement', 'DR'),
                                                                                       (2524, 'Recovery for Damage', 'Liability', 'CR'),
                                                                                       (2103, 'Savings', 'Liability', 'CR'),
                                                                                       (2502, 'Phone Payable', 'Liability', 'CR'),
                                                                                       (2505, 'TV Fees Payable', 'Liability', 'CR'),
                                                                                       (2506, 'Catalogue Sales Payable', 'Liability', 'CR'),
                                                                                       (2507, 'Library Payable', 'Liability', 'CR'),
                                                                                       (2508, 'Flowers Payable', 'Liability', 'CR'),
                                                                                       (2509, 'Baby Spends Payable', 'Liability', 'CR'),
                                                                                       (2510, 'Medical Fees Payable', 'Liability', 'CR'),
                                                                                       (2511, 'Newspaper Payable', 'Liability', 'CR'),
                                                                                       (2512, 'Photocopies Payable', 'Liability', 'CR'),
                                                                                       (2513, 'Postage Payable', 'Liability', 'CR'),
                                                                                       (3102, 'To Record Overages', 'Receipt', 'CR'),
                                                                                       (4101, 'To Record Shortages', 'Disbursement', 'DR'),
                                                                                       (4103, 'To Record Zero Cash Reconciliation', 'Disbursement', 'DR'),
                                                                                       (2525, 'Automated Deductions', 'Liability', 'CR'),
                                                                                       (25173, 'XXXX', 'Liability', 'CR'),
                                                                                       (11011, 'Bank Account 2', 'Asset', 'DR'),
                                                                                       (25174, 'XXXX', 'Liability', 'CR'),
                                                                                       (25135, 'XXXX', 'Liability', 'CR'),
                                                                                       (1504, 'Receivable For Bonuses', 'Asset', 'DR'),
                                                                                       (2504, 'Prison Payable', 'Liability', 'CR'),
                                                                                       (1103, 'Cash Account', 'Asset', 'DR'),
                                                                                       (1104, 'Post Receipts', 'Asset', 'DR'),
                                                                                       (1503, 'Receivable For Discharge Grants', 'Asset', 'DR'),
                                                                                       (1505, 'Receivable For Compensation Claims', 'Asset', 'DR'),
                                                                                       (1102, 'Reception Receipts', 'Asset', 'DR');

CREATE TABLE transaction_type
(
    TXN_TYPE                VARCHAR(10)  NOT NULL,
    DESCRIPTION             VARCHAR(255) NOT NULL,
    ACTIVE_FLAG             VARCHAR(1)   NOT NULL,
    TXN_USAGE               VARCHAR(3)   NOT NULL,
    ALL_CASELOAD_FLAG       VARCHAR(1)   NOT NULL,
    EXPIRY_DATE             VARCHAR(19)  NOT NULL,
    UPDATE_ALLOWED_FLAG     VARCHAR(1)   NOT NULL,
    MANUAL_INVOICE_FLAG     VARCHAR(1)   NOT NULL,
    CREDIT_OBLIGATION_TYPE  VARCHAR(2)   NOT NULL,
    LIST_SEQ                INTEGER,
    GROSS_NET_FLAG          VARCHAR(1)   NOT NULL,
    CASELOAD_TYPE           VARCHAR(4)   NOT NULL,
    CONSTRAINT pk_transaction_type PRIMARY KEY (TXN_TYPE)
);

ALTER TABLE transaction_type
    ADD CONSTRAINT uc_transaction_type UNIQUE (TXN_TYPE);

INSERT INTO transaction_type
(
    TXN_TYPE,
    DESCRIPTION,
    ACTIVE_FLAG,
    TXN_USAGE,
    ALL_CASELOAD_FLAG,
    EXPIRY_DATE,
    UPDATE_ALLOWED_FLAG,
    MANUAL_INVOICE_FLAG,
    CREDIT_OBLIGATION_TYPE,
    LIST_SEQ,
    GROSS_NET_FLAG,
    CASELOAD_TYPE
)
VALUES
    ('HOA', 'Add Hold', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 2, 'N', 'INST'),
    ('FT', 'Funds Transfer', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('AJ', 'Adjustment', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 9, 'N', 'INST'),
    ('CL', 'Close Account', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 18, 'N', 'INST'),
    ('CR', 'Cash Reconciliation', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 29, 'N', 'INST'),
    ('WA', 'Advance Repayment', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 88, 'N', 'INST'),
    ('CLEAR', 'Clear Accounts Payable for FXOB', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('PAY', 'Payroll', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('TIS', 'Transfer In Source', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('SPEN', 'Spendable Interest Distribution', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 99, 'G', 'INST'),
    ('DEM', 'Demogrant', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('ADI', 'Admission', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('MAIL', 'Mail Room Receipt', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('DEDC', 'Community Deductions', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('BBEN', 'Between Beneficiaries', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('GBEN', 'GL-Ben Adj', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('CLR', 'Clear Beneficiary Payments', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('DPST', 'Offender Cash Deposit', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('CR1', 'Cash Reconciliation', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('SDEP', 'Shift End Deposit', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('REF', 'Offender Refunds', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('CASH', 'Cash', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('CHQ', 'Check', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('MO', 'Money Order', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('RCT', 'Receipt for Training', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('CPP', 'Credit for Prior Payments', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('CFPP', 'Credit for Prior Payment', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('NOR', 'Non-Offender Return', 'Y', 'C', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('TRAN1', 'Transaction Fee', 'Y', 'F', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('AJC', 'Adjustments', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('REST', 'Restitution', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('GJC', 'General Journal Transaction', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('CLC', 'Close Account', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('OPC', 'Re-Open Closed Account', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('CHK', 'Check Recepit', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('CKD', 'Offender Check Deposit', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('DEPC', 'Deposit Undeposited Receipts', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('FTC', 'Funds Transfer', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('HOAC', 'Add Hold', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('OTC', 'Sub-Account Transfer', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('RCFC', 'Receipt Collection Fee', 'Y', 'F', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('PAYOC', 'MANUAL', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('WAR', 'Warrant', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'COMM'),
    ('BANK', 'Monies to Private Bank', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('NOS', 'Non-Offender Sale', 'Y', 'C', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('OMEDI', 'Medical Loan', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('TRNFEE', 'Transaction fee', 'N', 'D', 'Y', '2007-07-24 19:57:00', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('EARN', 'Earnings', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 5, 'N', 'INST'),
    ('COMP', 'Compensation Claim', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 6, 'N', 'INST'),
    ('BONUS', 'Cash Bonus', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 7, 'N', 'INST'),
    ('CANT', 'Canteen Spend', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 8, 'N', 'INST'),
    ('REFND', 'Canteen Refund', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 9, 'N', 'INST'),
    ('DGRNT', 'Discharge Grant', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('CAT', 'Catalogue Spends 1', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 11, 'N', 'INST'),
    ('ADV', 'Advance', 'Y', 'ADV', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('WFT', 'Transfer Funds to NACRO', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('CRS', 'Commissary System Sale', 'Y', 'C', 'Y', '2005-09-29', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('CSR', 'Commissary System Return', 'Y', 'O', 'Y', '2005-09-29', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('CASHD', 'Cash Disbursement', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('CRCHK', 'Check-Cash Reconciliation', 'Y', 'O', 'Y', '2005-09-29', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('CHEQ', 'Cheque Receipt', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('HOUP', 'Housing Payment', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('CREFND', 'Catalogue Refund', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('POPDGE', 'Postal Order Poundage', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('MRPR', 'Misc Receipt - Private Cash', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('MRSP', 'Misc Receipt - Spends', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('MRSV', 'Misc Receipt - Saving', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('TVR', 'Television Refund', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('LIBR', 'Library Refund', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('NEWSR', 'Newspaper Refund', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('CHAPSP', 'Chaplaincy Refund - Spends', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('ANONSV', 'Anonymous Cash - Savings', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('PINS', 'Pin Phone Refund - Spends', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('PINP', 'Pin Phone Refund - Private Cash', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('CATR1', 'Catalogue Refunds 1', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('CATR2', 'Catalogue Refunds 2', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('CATR3', 'Catalogue Refunds 3', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('CATR4', 'Catalogue Refunds 4', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('BONS', 'Bonus - Spends', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('PRZS', 'Prize Money - Spends', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('CHQCAN', 'Cancelled cheque', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('MPP', 'Misc Payment - Private Cash', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('MPS', 'Misc Payment - Spends', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('PINFN', 'Pin Phones (FNPs) - Private Cash', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('CHAPSS', 'Chaplaincy Spends - Spends', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('POUN', 'Poundage - Spends', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('EARS', 'Earnings - Spends', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('TVISS', 'Town Visits - Spends', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('DPS', 'Data Protection - Spends', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('POSS', 'Postage - Spends', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('RELS', 'Money to Relatives- Spends', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('IDS', 'ID Card replacement - Spends', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('CHARS', 'Charity - Spends', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('MAR', 'Money After Release - PC', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('SBDS', 'Story Book Dad - Spends', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('OWSS', 'Outworkers Subsistence - Spends', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('MDTS', 'Money through digital service', 'N', 'R', 'Y', '', 'Y', 'Y', '', 1, 'N', 'INST'),
    ('WHF', 'Withhold Funds', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('WFR', 'Withheld Funds Reversal', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('REREV', 'Receipt Review', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('AD', 'Open/Reopen Trust Account', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('POST', 'Money Through Post', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 1, 'N', 'INST'),
    ('ADJ', 'Adjudication Award', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('TLCASH', 'Manual Transfer to LIDS (Private Cash)', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('TLSAV', 'Manual Transfer to LIDS (Savings)', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('TLSPND', 'Manual Transfer to LIDS (Spends)', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('FLCASH', 'Manual Transfer from LIDS (Private Cash)', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('FLSAV', 'Manual Transfer from LIDS (Savings)', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('FLSPND', 'Manual Transfer from LIDS (Spends)', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('SOL', 'Solicitor/Legal', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('CHAR', 'Charity', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('MONOTH', 'Money From Other Prison/Hospital', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('EDUEXT', 'External Education Course', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('EDURES', 'Educational Materials', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('BONFES', 'Festive/Seasonal Award', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('CAT2', 'Catalogue Spends 2', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('CAT3', 'Catalogue Spends 3', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('CAT4', 'Catalogue Spends 4', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('A_EARN', 'Offender Payroll', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('DSAV', 'Recovery for Damage - Savings', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('DCASH', 'Recovery for Damage - Private Cash', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('DSPEN', 'Recovery for Damage - Spends', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('RDSAV', 'Repay Recovery for Damage - Savings', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('RDCASH', 'Repay Recovery for Damage - Private Cash', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('RDSPEN', 'Repay Recovery for Damage - Spends', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('DAMPRI', 'Private Prison Repayments - Non NOMIS', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 100, 'N', 'INST'),
    ('DED', 'Deduction', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 12, 'N', 'INST'),
    ('DEP', 'Deposit Receipts to Bank', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('ECRED', 'Prison Credit', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('FCANT', 'First Night Canteen', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('GJ', 'General Journal Transaction', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 55, 'N', 'INST'),
    ('HOR', 'Hold Removal', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 3, 'N', 'INST'),
    ('MEDI', 'Medical Disbursement', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('ODEP', 'Offender Regular Deposit', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('OFFWTH', 'Offender Withdrawal', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('OP', 'Re-Open Closed Account', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 65, 'N', 'INST'),
    ('OPEN', 'Open Drawer', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('PAYOB', 'MANUAL', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('PHONE', 'Phone Credit', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 13, 'N', 'INST'),
    ('RECEP', 'Money at Reception', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 3, 'N', 'INST'),
    ('RELA', 'Money to Relatives', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 4, 'N', 'INST'),
    ('SUPTRN', 'Supervisor - Supervisor Transfer', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('TIR', 'Transfer In Regular', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('TOR', 'Transfer Out Regular', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('VISIT', 'Money Through Visits', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 2, 'N', 'INST'),
    ('WRT', 'Write off Credit Obligation', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('LIB', 'Library', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 8, 'N', 'INST'),
    ('FLO', 'Flowers', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 9, 'N', 'INST'),
    ('BAB', 'Baby Spends', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 10, 'N', 'INST'),
    ('MED', 'Medical Fees', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 11, 'N', 'INST'),
    ('NEWS', 'Newspaper', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 12, 'N', 'INST'),
    ('PCOP', 'Photocopies', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 13, 'N', 'INST'),
    ('POSTG', 'Postage', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 14, 'N', 'INST'),
    ('RUPAY', 'Reverse Unemployment Pay', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 19, 'N', 'INST'),
    ('TELE', 'Television', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 15, 'N', 'INST'),
    ('ATOF', 'Cash To Spends Transfer', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('TAP', 'Temporary Absence', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('TGRNT', 'Travel Grant', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('SGRNT', 'Subsistence Grant', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('UPAY', 'Unemployment Pay', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('OT', 'Sub-Account Transfer', 'Y', 'O', 'Y', '', 'Y', 'Y', '', 66, 'N', 'INST'),
    ('DISCP', 'Discharge Payment', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('MTDS', 'Money through digital service', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 1, 'N', 'INST'),
    ('RCASH', 'Recovery for Payment - Private Cash', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('RRCASH', 'Repay Recovery for Payment - Priv. Cash', 'Y', 'R', 'Y', '', 'Y', 'Y', '', 99, 'N', 'INST'),
    ('DTDS', 'Disbursement through Digital service', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 1, 'N', 'INST'),
    ('PRIPAY', 'Private Prison Repayments - Non NOMIS', 'Y', 'D', 'Y', '', 'Y', 'Y', '', 100, 'N', 'INST');


CREATE TABLE account (
                         id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                         uuid UUID NOT NULL UNIQUE,
                         prison_id BIGINT NOT NULL,
                         name VARCHAR(255) NOT NULL,
                         account_type VARCHAR(25) NOT NULL,
                         account_code INT NOT NULL,
                         prison_number VARCHAR(10),
                         sub_account_type VARCHAR(25),
                         posting_type VARCHAR(2) NOT NULL,
                         initial_debits DECIMAL(19, 2) DEFAULT 0.00 NOT NULL,
                         initial_credits DECIMAL(19, 2) DEFAULT 0.00 NOT NULL,
                         initial_on_hold DECIMAL(19, 2) DEFAULT 0.00 NOT NULL,
                         total_debits DECIMAL(19, 2) DEFAULT 0.00 NOT NULL,
                         total_credits DECIMAL(19, 2) DEFAULT 0.00 NOT NULL,
                         total_on_hold DECIMAL(19, 2) DEFAULT 0.00 NOT NULL,
                         FOREIGN KEY (prison_id) REFERENCES prison(id),
                         FOREIGN KEY (account_code) REFERENCES account_code_lookup(account_code)
);

CREATE TABLE transaction (
                             id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                             uuid UUID NOT NULL UNIQUE,
                             transaction_type VARCHAR(10) NOT NULL,
                             description VARCHAR(255) NOT NULL,
                             date TIMESTAMP WITH TIME ZONE NOT NULL,
                             legacy_transaction_id BIGINT,
                             synchronized_transaction_id UUID,
                             FOREIGN KEY (transaction_type) REFERENCES transaction_type(txn_type)
);

CREATE TABLE transaction_entry (
                                   id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                                   transaction_id BIGINT NOT NULL,
                                   account_id BIGINT NOT NULL,
                                   amount DECIMAL(19, 2) NOT NULL,
                                   entry_type VARCHAR(2) NOT NULL,
                                   FOREIGN KEY (transaction_id) REFERENCES transaction(id),
                                   FOREIGN KEY (account_id) REFERENCES account(id)
);